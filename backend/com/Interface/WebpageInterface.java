package com.lingvosphere.backend.Interfaces;

import com.lingvosphere.backend.Database;
import com.mongodb.client.MongoCollection;
import org.bson.Document;
import xyz.Blockers.Utils.RestfulAPIServer.APIHandler;
import xyz.Blockers.Utils.RestfulAPIServer.Context;
import xyz.Blockers.Utils.RestfulAPIServer.RestfulAPIServer;

import java.util.Map;

import static com.mongodb.client.model.Filters.eq;

public class WebpageInterface {
    public static void init(RestfulAPIServer server) {
        server.GET("/resetPwd", new APIHandler() {
            @Override
            public void handle(Context context) {
                Map<String, String> params = context.getParams();
                String uid = params.get("uid");
                String token = params.get("token");
                if(!checkToken(uid, token)) {
                    context.Text("<p>Authentication Failed!</p>");
                    return;
                }
                String html = "<html><head> <title>Reset Passowrd</title> <style> body { background-color: #5eb18a; } .main { width: 400px; height: 400px; background-color: #fff; border-radius: 10px; margin-top: calc(50vh - 200px); margin-left: calc(50vw - 200px); transition: all 0.3s ease-in-out; } .main:hover { box-shadow: 0 0 8px 0 #fff; transition: all 0.1s ease-in-out; } .logo { width: 100px; margin-left: calc(50% - 50px); text-align: center; } .logo svg { width: 100px; height: 100px; transition: all 0.3s ease-in-out; } button { background-color: #fff; width: 100px; margin-top: 40px; margin-left: calc(50% - 50px); color: #5eb18a; border: #5eb18a solid 2px; padding: 10px 20px; border-radius: 4px; cursor: pointer; transition: all 0.3s ease-in-out; font-weight: bold; } button:hover { transform: scale(1.1); background-color: #5eb18a; color: #fff; transition: all 0.1s ease-in-out; box-shadow: 0 0 8px 0 #5eb18a; } * { font-family: Arial, Helvetica, sans-serif; } p { margin-left: 60px; margin-bottom: 0px; } input { width: 280px; padding: 10px 15px; margin: 8px 0; margin-left: 60px; box-sizing: border-box; border: 2px solid #ddd; border-radius: 4px; font-size: 16px; background-color: #f9f9f9; transition: border-color 0.3s, box-shadow 0.3s; } input:focus { outline: none; border-color: #5cb85c; box-shadow: 0 0 8px 0 rgba(92, 184, 92, 0.6); } input[type=\"text\"]::placeholder { color: #999; } .icon { position: relative; width: 60px; height: 60px; margin-left: 0px; margin-top: 0px; background-color: #5eb18a; border-radius: 50%; padding: 10px; margin-top: 20px; margin-left: calc(50% - 30px); } h1 { text-align: center; color: #5eb18a; } </style> <script> function success() { var elementsToRemove = document.querySelectorAll('p, button, input'); elementsToRemove.forEach(function (element) { element.parentNode.removeChild(element); }); document.getElementById(\"main\").innerHTML += `<svg class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"1493\"> <path d=\"M822.464 265.344a28.256 28.256 0 0 0-43.072 1.312l-352.96 417.664-181.92-212.992a28.288 28.288 0 0 0-43.104-1.088 37.12 37.12 0 0 0-0.96 48.256l204.096 238.944c5.76 6.752 13.696 10.56 22.016 10.56h0.096a29.088 29.088 0 0 0 22.048-10.656L823.68 313.6c11.52-13.728 11.008-35.328-1.216-48.256\" fill=\"#fff\" p-id=\"1494\"></path> </svg> <h1>Success!</h1>`; document.getElementById(\"logo\").style.marginTop = \"40px\"; } window.onload = async function () { document.getElementById(\"button\").onclick = async function () { const pwd = document.getElementById(\"pwd\").value; const re_pwd = document.getElementById(\"pwd\").value; if(pwd != re_pwd) { alert(\"Passwords doesn't match\"); return; } const response=await fetch(\"http://127.0.0.1:1024/api/user/resetPwd?uid=" + uid + "&token=" + token + "&pwd=\" + pwd); const data = await response.json(); if(data.code == 0) success(); } } </script></head><body> <div class=\"main\" id=\"main\"> <div class=\"logo\"> <svg id=\"logo\" width=\"254\" height=\"162\" viewBox=\"0 0 254 162\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"> <path d=\"M43.776 59.536C43.776 60.176 43.808 60.752 43.872 61.264C44 63.568 44.064 65.328 44.064 66.544C44.064 67.696 43.968 68.56 43.776 69.136C43.648 69.648 43.392 69.936 43.008 70C42.624 70 42.08 70 41.376 70C40.672 69.936 39.744 69.936 38.592 70C37.504 70.064 35.616 70.128 32.928 70.192C30.304 70.256 26.656 70.288 21.984 70.288C17.376 70.288 11.2 70.224 3.456 70.096V68.368C3.648 63.568 3.808 59.248 3.936 55.408C4.064 51.504 4.128 47.888 4.128 44.56C4.192 41.168 4.224 37.904 4.224 34.768C4.224 31.632 4.192 28.432 4.128 25.168C4.064 21.904 4 18.448 3.936 14.8C3.872 11.088 3.808 6.992 3.744 2.512C4.384 2.256 5.376 2.064 6.72 1.936C8.064 1.744 9.504 1.648 11.04 1.648C12.576 1.648 14.08 1.744 15.552 1.936C17.024 2.128 18.208 2.416 19.104 2.8C18.976 6.96 18.912 11.248 18.912 15.664C18.976 20.016 19.04 24.4 19.104 28.816C19.168 33.232 19.2 37.648 19.2 42.064C19.264 46.416 19.264 50.64 19.2 54.736V54.832C19.648 54.704 20.48 54.672 21.696 54.736C22.976 54.736 24.448 54.768 26.112 54.832C27.776 54.896 29.536 54.992 31.392 55.12C33.312 55.184 35.104 55.248 36.768 55.312C38.496 55.376 40 55.44 41.28 55.504C42.624 55.504 43.552 55.472 44.064 55.408C44.064 56.112 44.032 56.816 43.968 57.52C43.904 58.16 43.84 58.832 43.776 59.536ZM54.138 21.712C55.61 21.776 57.37 21.776 59.418 21.712H61.05V22C60.986 29.744 60.826 37.648 60.57 45.712C60.378 53.776 60.506 61.68 60.954 69.424C60.634 69.808 59.834 70 58.554 70C57.274 70.064 55.866 70.064 54.33 70C52.858 70 51.45 69.968 50.106 69.904C48.762 69.84 47.866 69.872 47.418 70C47.738 65.968 47.866 61.872 47.802 57.712C47.802 53.552 47.738 49.424 47.61 45.328C47.482 41.232 47.418 37.2 47.418 33.232C47.418 29.2 47.61 25.296 47.994 21.52V21.424C48.25 21.36 48.666 21.36 49.242 21.424C49.882 21.488 50.362 21.52 50.682 21.52C51.514 21.584 52.666 21.648 54.138 21.712ZM47.706 8.272C47.578 6.224 47.546 3.728 47.61 0.783998L60.666 1.07199C60.666 1.456 60.666 2.16 60.666 3.184C60.73 4.144 60.762 5.23199 60.762 6.44799C60.826 7.59999 60.858 8.816 60.858 10.096C60.922 11.312 60.954 12.4 60.954 13.36C60.698 13.744 60.09 14 59.13 14.128C58.234 14.256 57.146 14.32 55.866 14.32C54.65 14.256 53.338 14.192 51.93 14.128C50.522 14 49.21 13.968 47.994 14.032C47.994 12.176 47.898 10.256 47.706 8.272ZM80.253 24.784C80.253 25.488 80.285 26.288 80.349 27.184C80.669 26.992 81.053 26.768 81.501 26.512C82.013 26.256 82.429 26 82.749 25.744C84.093 24.784 85.597 24.016 87.261 23.44C88.925 22.864 90.621 22.544 92.349 22.48C94.141 22.416 95.869 22.608 97.533 23.056C99.197 23.504 100.701 24.304 102.045 25.456C102.685 26.032 103.165 27.248 103.485 29.104C103.869 30.896 104.093 33.072 104.157 35.632C104.285 38.192 104.317 41.008 104.253 44.08C104.253 47.088 104.221 50.16 104.157 53.296C104.093 56.368 104.029 59.344 103.965 62.224C103.901 65.104 103.933 67.632 104.061 69.808C101.821 70.128 99.805 70.256 98.013 70.192C96.285 70.192 94.301 70.192 92.061 70.192C91.933 68.72 91.869 67.056 91.869 65.2C91.869 63.344 91.869 61.424 91.869 59.44C91.933 57.456 91.933 55.472 91.869 53.488C91.869 51.504 91.805 49.648 91.677 47.92C91.613 47.152 91.549 46.32 91.485 45.424C91.421 44.464 91.293 43.536 91.101 42.64C90.973 41.744 90.749 40.944 90.429 40.24C90.173 39.536 89.789 38.992 89.277 38.608C89.213 38.544 89.149 38.512 89.085 38.512C89.021 38.512 88.957 38.48 88.893 38.416C88.381 38.16 87.613 37.968 86.589 37.84C85.629 37.648 84.669 37.712 83.709 38.032C82.749 38.288 81.885 38.864 81.117 39.76C80.349 40.592 79.901 41.872 79.773 43.6C79.645 45.84 79.613 48.048 79.677 50.224C79.741 52.336 79.805 54.48 79.869 56.656C79.997 58.768 80.061 60.88 80.061 62.992C80.061 65.104 79.933 67.216 79.677 69.328V69.712C78.589 70.032 77.629 70.224 76.797 70.288C76.029 70.352 75.229 70.352 74.397 70.288C73.565 70.288 72.637 70.256 71.613 70.192C70.589 70.128 69.309 70.16 67.773 70.288C67.773 62.416 67.677 54.544 67.485 46.672C67.357 38.8 67.421 30.64 67.677 22.192C68.445 22.256 69.085 22.32 69.597 22.384C70.109 22.384 70.589 22.384 71.037 22.384C71.485 22.384 71.965 22.384 72.477 22.384C72.989 22.32 73.629 22.256 74.397 22.192C74.653 22.192 75.101 22.16 75.741 22.096C76.381 21.968 77.021 21.872 77.661 21.808C78.301 21.744 78.877 21.744 79.389 21.808C79.901 21.808 80.157 21.904 80.157 22.096C80.285 23.184 80.317 24.08 80.253 24.784ZM120.304 45.424C120.304 46 120.304 46.608 120.304 47.248V48.112C120.304 51.376 121.264 54.16 123.184 56.464C124.336 57.872 125.872 58.736 127.792 59.056C129.712 59.312 131.504 59.184 133.168 58.672C133.744 58.48 134.192 58.192 134.512 57.808C134.832 57.36 135.088 56.88 135.28 56.368C135.472 55.792 135.6 55.216 135.664 54.64C135.792 54 135.888 53.392 135.952 52.816C135.952 50.256 135.888 47.664 135.76 45.04C135.696 42.352 135.344 39.792 134.704 37.36C134.32 36.4 133.68 35.664 132.784 35.152C131.952 34.576 131.024 34.224 130 34.096C128.976 33.968 127.952 34.064 126.928 34.384C125.968 34.64 125.104 35.088 124.336 35.728C123.376 36.816 122.544 38.032 121.84 39.376C121.2 40.656 120.752 42.032 120.496 43.504C120.368 44.144 120.304 44.784 120.304 45.424ZM139.408 88.816C138.512 89.008 137.68 89.136 136.912 89.2C136.272 89.328 135.12 89.36 133.456 89.296C131.792 89.232 129.648 89.2 127.024 89.2C124.016 89.2 121.328 88.56 118.96 87.28C116.592 86 114.672 84.272 113.2 82.096C112.944 81.648 112.688 81.04 112.432 80.272C112.24 79.568 112.048 78.832 111.856 78.064C111.728 77.296 111.632 76.56 111.568 75.856C111.568 75.152 111.6 74.544 111.664 74.032C112.304 73.776 113.168 73.584 114.256 73.456C115.344 73.392 116.464 73.36 117.616 73.36C118.832 73.424 119.984 73.488 121.072 73.552C122.224 73.68 123.184 73.808 123.952 73.936C123.952 75.6 124.464 76.912 125.488 77.872C126.576 78.896 127.76 79.472 129.04 79.6C130.384 79.728 131.664 79.408 132.88 78.64C134.16 77.872 134.992 76.592 135.376 74.8C135.44 74.16 135.504 73.488 135.568 72.784C135.632 72.144 135.632 71.568 135.568 71.056C135.44 69.968 135.44 68.848 135.568 67.696C134.928 68.4 134.16 68.912 133.264 69.232C132.432 69.552 131.504 69.776 130.48 69.904C129.52 70.032 128.528 70.096 127.504 70.096C126.48 70.096 125.52 70.128 124.624 70.192C123.408 70.192 122.16 70.096 120.88 69.904C119.664 69.712 118.48 69.392 117.328 68.944C116.24 68.496 115.248 67.888 114.352 67.12C113.456 66.352 112.72 65.36 112.144 64.144C111.248 62.416 110.608 60.624 110.224 58.768C109.84 56.848 109.584 54.896 109.456 52.912C109.456 49.904 109.52 46.672 109.648 43.216C109.776 39.76 110.32 36.528 111.28 33.52C112.304 30.448 113.904 27.888 116.08 25.84C118.256 23.728 121.392 22.544 125.488 22.288C127.536 22.16 129.424 22.448 131.152 23.152C132.944 23.792 134.224 25.008 134.992 26.8C135.248 26.928 135.376 26.832 135.376 26.512C135.44 26.128 135.44 25.68 135.376 25.168C135.376 24.592 135.344 24.048 135.28 23.536C135.28 22.96 135.376 22.512 135.568 22.192C137.68 21.936 139.824 21.872 142 22C144.176 22.064 146.352 22.096 148.528 22.096C148.784 30.096 148.912 38.48 148.912 47.248C148.976 55.952 148.816 64.912 148.432 74.128C148.368 75.664 148.368 77.168 148.432 78.64C148.496 80.176 148.208 81.456 147.568 82.48C146.672 83.888 145.744 85.008 144.784 85.84C143.888 86.672 142.992 87.312 142.096 87.76C141.2 88.272 140.304 88.624 139.408 88.816ZM160.028 22.192C162.332 22 164.508 22.032 166.556 22.288C167.004 24.592 167.452 27.248 167.9 30.256C168.348 33.2 168.828 36.208 169.34 39.28C169.852 42.352 170.396 45.296 170.972 48.112C171.548 50.864 172.188 53.2 172.892 55.12C173.596 53.2 174.236 50.8 174.812 47.92C175.388 44.976 175.932 41.936 176.444 38.8C177.02 35.664 177.628 32.624 178.268 29.68C178.908 26.736 179.612 24.304 180.38 22.384C181.468 22.384 182.492 22.352 183.452 22.288C184.412 22.224 185.404 22.16 186.428 22.096C187.452 22.032 188.508 22 189.596 22C190.684 22 191.9 22.032 193.244 22.096C191.9 25.744 190.716 29.552 189.692 33.52C188.732 37.424 187.804 41.424 186.908 45.52C186.012 49.616 185.116 53.744 184.22 57.904C183.324 62 182.332 66.064 181.244 70.096C179.964 70.288 178.524 70.384 176.924 70.384C175.388 70.448 173.788 70.448 172.124 70.384C170.524 70.384 168.924 70.352 167.324 70.288C165.788 70.288 164.412 70.288 163.196 70.288C161.916 62.288 160.444 54.128 158.78 45.808C157.116 37.488 155.26 29.552 153.212 22C155.516 22.256 157.788 22.32 160.028 22.192ZM195.737 29.104C196.121 27.888 196.409 26.928 196.601 26.224C197.049 25.264 197.753 24.432 198.713 23.728C199.737 23.024 200.889 22.448 202.169 22C203.513 21.488 204.921 21.136 206.393 20.944C207.929 20.752 209.465 20.656 211.001 20.656C212.281 20.784 213.497 20.816 214.649 20.752C215.865 20.624 217.145 20.624 218.489 20.752C220.537 20.88 222.489 21.296 224.345 22C226.201 22.64 227.801 23.6 229.145 24.88C230.041 25.456 230.745 26.384 231.257 27.664C231.769 28.944 232.153 30.448 232.409 32.176C232.665 33.84 232.825 35.696 232.889 37.744C232.953 39.728 233.017 41.776 233.081 43.888C233.017 45.744 232.921 47.856 232.793 50.224C232.729 52.592 232.569 54.864 232.313 57.04C232.121 59.216 231.833 61.168 231.449 62.896C231.129 64.624 230.649 65.808 230.009 66.448C228.921 67.984 227.481 69.072 225.689 69.712C223.961 70.352 222.073 70.736 220.025 70.864C217.977 71.056 215.865 71.056 213.689 70.864C211.513 70.736 209.529 70.672 207.737 70.672C204.473 70.096 201.721 68.688 199.481 66.448C197.753 64.912 196.569 62.992 195.929 60.688C195.289 58.384 194.905 55.984 194.777 53.488C194.649 50.928 194.617 48.368 194.681 45.808C194.809 43.248 194.777 40.912 194.585 38.8C194.585 37.648 194.617 36.528 194.681 35.44C194.745 34.288 194.873 33.104 195.065 31.888C195.129 31.184 195.353 30.256 195.737 29.104ZM211.865 35.44C210.521 35.824 209.433 36.528 208.601 37.552C208.217 37.808 207.929 38.448 207.737 39.472C207.481 41.52 207.353 43.568 207.353 45.616C207.353 47.6 207.289 49.712 207.161 51.952C207.097 53.424 207.481 54.576 208.313 55.408C209.145 56.176 210.137 56.72 211.289 57.04C212.505 57.296 213.753 57.36 215.033 57.232C216.313 57.04 217.369 56.72 218.201 56.272C219.289 55.76 220.025 54.704 220.409 53.104C220.665 51.056 220.857 49.008 220.985 46.96C221.177 44.848 221.081 42.864 220.697 41.008C220.377 38.768 219.449 37.136 217.913 36.112C216.377 35.088 214.361 34.864 211.865 35.44ZM43.296 84.592C44.96 87.728 45.344 91.696 44.448 96.496H44.352C42.112 96.88 39.712 97.136 37.152 97.264C34.592 97.328 32.192 97.04 29.952 96.4C30.336 94.672 29.984 93.232 28.896 92.08C27.808 90.928 26.496 90.192 24.96 89.872C23.424 89.552 21.92 89.712 20.448 90.352C19.04 90.992 18.208 92.208 17.952 94C17.824 94.448 17.76 94.896 17.76 95.344C17.824 95.728 17.888 96.144 17.952 96.592C18.464 98.128 19.296 99.152 20.448 99.664C21.6 100.176 22.848 100.528 24.192 100.72C27.584 101.104 30.72 102.192 33.6 103.984C36.544 105.776 38.944 108.048 40.8 110.8C41.952 112.272 42.816 113.872 43.392 115.6C43.968 117.264 44.288 118.992 44.352 120.784C44.48 122.576 44.352 124.4 43.968 126.256C43.648 128.048 43.104 129.776 42.336 131.44C41.568 133.424 40.544 135.12 39.264 136.528C37.984 137.936 36.512 139.088 34.848 139.984C33.248 140.88 31.488 141.552 29.568 142C27.712 142.384 25.792 142.544 23.808 142.48C20.992 142.416 18.176 141.936 15.36 141.04C12.608 140.08 10.144 138.768 7.968 137.104C5.792 135.44 4.064 133.424 2.784 131.056C1.504 128.624 0.96 125.872 1.152 122.8V122.512V122.224C3.392 121.904 5.856 121.84 8.544 122.032C11.232 122.16 13.664 122.192 15.84 122.128C15.968 124.176 16.768 125.712 18.24 126.736C19.776 127.76 21.376 128.272 23.04 128.272C24.768 128.208 26.24 127.632 27.456 126.544C28.736 125.456 29.184 123.792 28.8 121.552C28.608 120.016 28.032 118.8 27.072 117.904C26.112 116.944 24.96 116.176 23.616 115.6C22.336 115.024 20.928 114.608 19.392 114.352C17.856 114.032 16.416 113.744 15.072 113.488C13.792 113.232 12.608 112.816 11.52 112.24C10.432 111.664 9.44 110.992 8.544 110.224C5.6 107.408 3.68 104.304 2.784 100.912C1.952 97.52 1.92 94.224 2.688 91.024C3.456 87.824 4.896 84.912 7.008 82.288C9.184 79.664 11.808 77.712 14.88 76.432C16.416 75.792 18.112 75.376 19.968 75.184C21.824 74.928 23.68 74.864 25.536 74.992C27.456 75.056 29.312 75.312 31.104 75.76C32.96 76.208 34.656 76.784 36.192 77.488C39.264 79.088 41.632 81.456 43.296 84.592ZM62.7218 157.456C62.7218 158.16 62.6898 159.152 62.6258 160.432V161.488C62.6258 161.552 62.1778 161.616 61.2818 161.68C60.4498 161.808 59.3938 161.872 58.1138 161.872C56.8978 161.936 55.5858 161.936 54.1778 161.872C52.7698 161.872 51.5538 161.776 50.5298 161.584V155.248C50.5298 149.936 50.4658 144.624 50.3378 139.312C50.2098 134 50.0818 128.784 49.9538 123.664C49.8898 118.48 49.8258 113.424 49.7617 108.496C49.7617 103.504 49.8257 98.704 49.9538 94.096C51.9377 94.096 54.1138 94.064 56.4818 94C58.8498 93.872 60.9938 93.936 62.9138 94.192C62.9778 94.32 63.0098 94.544 63.0098 94.864C63.0098 95.504 63.0098 96.016 63.0098 96.4C63.0738 96.784 63.1058 97.328 63.1058 98.032C63.2338 98.352 63.3618 98.608 63.4898 98.8C63.6818 98.928 63.8738 98.8 64.0658 98.416C65.0258 96.496 66.3058 95.28 67.9058 94.768C69.5058 94.192 71.2018 94.032 72.9938 94.288C76.6418 94.544 79.5218 95.504 81.6338 97.168C83.7458 98.768 85.3138 100.848 86.3378 103.408C87.4258 105.904 88.1298 108.72 88.4498 111.856C88.7698 114.992 88.9938 118.16 89.1218 121.36C89.1218 123.6 88.9618 125.776 88.6418 127.888C88.3858 130 87.9378 131.952 87.2978 133.744C86.7218 135.472 85.9218 136.976 84.8978 138.256C83.9378 139.472 82.7538 140.336 81.3458 140.848C79.6178 141.488 77.6978 141.872 75.5858 142C73.5378 142.192 71.5858 142.192 69.7298 142C67.8738 141.872 66.3058 141.584 65.0258 141.136C63.7458 140.688 63.0418 140.176 62.9138 139.6C62.9778 142.608 63.0098 145.04 63.0098 146.896C63.0098 148.752 63.0098 150.224 63.0098 151.312C63.0098 152.464 62.9778 153.328 62.9138 153.904C62.9138 154.544 62.8818 155.12 62.8178 155.632C62.8178 156.208 62.7858 156.816 62.7218 157.456ZM74.6258 129.328C76.2258 128.176 77.1858 126.48 77.5058 124.24C77.8258 123.344 78.0178 122.416 78.0818 121.456C78.1458 120.496 78.1778 119.568 78.1778 118.672C78.1778 117.072 77.9858 115.536 77.6018 114.064C77.2178 112.528 76.6418 111.184 75.8738 110.032C75.1058 108.816 74.1778 107.856 73.0898 107.152C72.0018 106.448 70.7858 106.096 69.4418 106.096C67.7778 106.096 66.4978 106.448 65.6018 107.152C64.7058 107.856 64.0018 108.816 63.4898 110.032C63.0418 111.248 62.7538 112.72 62.6258 114.448C62.5618 116.176 62.5298 118.032 62.5298 120.016C62.5298 122.512 62.5618 124.496 62.6258 125.968C62.7538 127.376 63.0098 128.464 63.3938 129.232C63.7778 130 64.3538 130.512 65.1218 130.768C65.9538 130.96 67.0418 131.056 68.3858 131.056C71.0098 131.056 73.0898 130.48 74.6258 129.328ZM107.157 96.784C107.157 98.128 107.157 98.928 107.157 99.184C107.477 98.992 107.861 98.768 108.309 98.512C108.821 98.256 109.237 98 109.557 97.744C110.901 96.784 112.405 96.016 114.069 95.44C115.733 94.864 117.429 94.544 119.157 94.48C120.949 94.416 122.677 94.608 124.341 95.056C126.005 95.504 127.509 96.304 128.853 97.456C129.493 98.032 129.973 99.248 130.293 101.104C130.677 102.896 130.901 105.072 130.965 107.632C131.093 110.192 131.125 113.008 131.061 116.08C131.061 119.088 131.029 122.16 130.965 125.296C130.901 128.368 130.837 131.344 130.773 134.224C130.709 137.104 130.741 139.632 130.869 141.808C128.629 142.128 126.613 142.256 124.821 142.192C123.093 142.192 121.109 142.192 118.869 142.192C118.741 140.72 118.677 139.056 118.677 137.2C118.677 135.344 118.677 133.424 118.677 131.44C118.741 129.456 118.741 127.472 118.677 125.488C118.677 123.504 118.613 121.648 118.485 119.92C118.421 119.152 118.357 118.32 118.293 117.424C118.229 116.464 118.101 115.536 117.909 114.64C117.781 113.744 117.557 112.944 117.237 112.24C116.981 111.536 116.597 110.992 116.085 110.608C116.021 110.544 115.957 110.512 115.893 110.512C115.829 110.512 115.765 110.48 115.701 110.416C115.189 110.16 114.421 109.968 113.397 109.84C112.437 109.648 111.477 109.712 110.517 110.032C109.557 110.288 108.693 110.864 107.925 111.76C107.157 112.592 106.709 113.872 106.581 115.6C106.453 117.84 106.421 120.048 106.485 122.224C106.549 124.336 106.613 126.48 106.677 128.656C106.805 130.768 106.869 132.88 106.869 134.992C106.869 137.104 106.741 139.216 106.485 141.328V141.712C105.397 142.032 104.437 142.224 103.605 142.288C102.837 142.352 102.037 142.352 101.205 142.288C100.373 142.288 99.445 142.256 98.421 142.192C97.397 142.128 96.117 142.16 94.581 142.288C94.581 139.664 94.549 136.528 94.485 132.88C94.485 129.168 94.453 125.2 94.389 120.976C94.389 116.752 94.389 112.4 94.389 107.92C94.389 103.376 94.389 98.96 94.389 94.672C94.389 90.384 94.389 86.352 94.389 82.576C94.453 78.736 94.517 75.408 94.581 72.592C95.349 72.656 95.989 72.72 96.501 72.784C97.013 72.784 97.493 72.784 97.941 72.784C98.389 72.784 98.869 72.784 99.381 72.784C99.893 72.72 100.533 72.656 101.301 72.592C101.557 72.592 102.005 72.56 102.645 72.496C103.285 72.368 103.925 72.272 104.565 72.208C105.205 72.144 105.781 72.144 106.293 72.208C106.805 72.208 107.061 72.304 107.061 72.496C107.125 72.816 107.157 73.68 107.157 75.088C107.157 76.432 107.157 78.064 107.157 79.984C107.157 81.84 107.157 83.856 107.157 86.032C107.157 88.144 107.157 90.128 107.157 91.984C107.157 93.84 107.157 95.44 107.157 96.784ZM152.204 118.192C150.796 118.128 149.772 118.032 149.132 117.904V119.632C149.196 121.552 149.26 123.12 149.324 124.336C149.452 125.552 149.868 126.736 150.572 127.888C151.34 129.36 152.428 130.448 153.836 131.152C155.244 131.856 156.62 132.08 157.964 131.824C159.308 131.568 160.428 130.8 161.324 129.52C162.284 128.176 162.7 126.192 162.572 123.568C163.212 123.632 164.076 123.664 165.164 123.664C166.252 123.6 167.372 123.536 168.524 123.472C169.74 123.408 170.892 123.408 171.98 123.472C173.068 123.472 173.964 123.568 174.668 123.76C174.54 125.424 174.412 127.056 174.284 128.656C174.156 130.256 173.996 131.76 173.804 133.168C173.612 134.512 173.356 135.696 173.036 136.72C172.78 137.68 172.428 138.352 171.98 138.736C170.892 140.272 169.484 141.36 167.756 142C166.028 142.64 164.14 143.024 162.092 143.152C160.044 143.28 157.932 143.28 155.756 143.152C153.644 143.024 151.692 142.96 149.9 142.96C148.108 142.704 146.444 142.128 144.908 141.232C143.18 140.016 141.74 138.448 140.588 136.528C139.436 134.544 138.508 132.4 137.804 130.096C137.1 127.728 136.62 125.232 136.364 122.608C136.108 119.984 136.044 117.36 136.172 114.736C136.364 112.368 136.556 110.096 136.748 107.92C137.004 105.68 137.516 103.504 138.284 101.392C139.116 99.536 140.396 97.968 142.124 96.688C143.852 95.344 145.804 94.352 147.98 93.712C150.156 93.008 152.46 92.624 154.892 92.56C157.324 92.496 159.692 92.752 161.996 93.328C164.94 93.84 167.308 94.864 169.1 96.4C170.892 97.936 172.236 99.792 173.132 101.968C174.092 104.144 174.668 106.544 174.86 109.168C175.052 111.792 175.052 114.448 174.86 117.136C174.412 117.264 173.548 117.392 172.268 117.52C171.052 117.648 169.58 117.776 167.852 117.904C166.188 118.032 164.396 118.128 162.476 118.192C160.556 118.256 158.7 118.288 156.908 118.288C155.18 118.288 153.612 118.256 152.204 118.192ZM163.436 105.616C162.796 104.464 161.9 103.6 160.748 103.024C160.236 102.704 159.724 102.48 159.212 102.352C158.7 102.16 158.092 102.064 157.388 102.064C155.852 102.064 154.604 102.224 153.644 102.544C152.684 102.864 151.916 103.312 151.34 103.888C150.764 104.464 150.316 105.136 149.996 105.904C149.74 106.672 149.548 107.472 149.42 108.304C149.292 109.008 149.228 109.52 149.228 109.84C149.292 110.096 149.612 110.288 150.188 110.416C150.764 110.48 151.66 110.512 152.876 110.512C154.156 110.448 156.012 110.416 158.444 110.416C160.108 110.416 161.356 110.448 162.188 110.512C163.02 110.576 163.596 110.608 163.916 110.608C164.3 110.544 164.492 110.448 164.492 110.32C164.492 110.128 164.492 109.776 164.492 109.264C164.492 107.984 164.14 106.768 163.436 105.616ZM193.325 96.4C193.389 96.592 193.421 96.912 193.421 97.36C193.677 97.232 194.253 96.976 195.149 96.592C196.109 96.208 197.037 95.856 197.933 95.536C199.149 95.152 200.525 94.864 202.061 94.672C203.597 94.416 205.037 94.256 206.381 94.192C207.725 94.128 208.845 94.128 209.741 94.192C210.701 94.192 211.181 94.224 211.181 94.288C211.181 96.464 211.149 98.384 211.085 100.048C211.085 101.712 211.085 103.216 211.085 104.56C211.085 105.84 211.085 107.024 211.085 108.112C211.085 109.2 211.117 110.224 211.181 111.184L210.317 110.896C209.997 110.768 209.645 110.672 209.261 110.608C208.941 110.48 208.621 110.352 208.301 110.224C207.533 110.032 206.733 109.872 205.901 109.744C205.133 109.616 204.717 109.552 204.653 109.552C202.925 109.36 201.325 109.264 199.853 109.264C198.445 109.264 197.197 109.488 196.109 109.936C195.085 110.384 194.285 111.088 193.709 112.048C193.133 113.008 192.877 114.384 192.941 116.176C193.005 118.416 193.069 120.528 193.133 122.512C193.197 124.496 193.229 126.512 193.229 128.56C193.229 130.544 193.229 132.592 193.229 134.704C193.293 136.752 193.325 138.96 193.325 141.328V141.712C192.237 142.032 191.245 142.224 190.349 142.288C189.453 142.352 188.525 142.352 187.565 142.288C186.605 142.288 185.549 142.256 184.397 142.192C183.309 142.128 181.997 142.16 180.461 142.288C180.461 134.416 180.365 126.544 180.173 118.672C180.044 110.8 180.109 102.64 180.365 94.192C181.133 94.256 181.773 94.32 182.285 94.384C182.797 94.384 183.277 94.384 183.725 94.384C184.173 94.384 184.653 94.384 185.165 94.384C185.677 94.32 186.317 94.256 187.085 94.192C187.341 94.192 187.789 94.16 188.429 94.096C189.133 94.032 189.837 93.968 190.541 93.904C191.309 93.84 191.949 93.84 192.461 93.904C193.037 93.904 193.325 93.968 193.325 94.096C193.325 94.608 193.325 94.992 193.325 95.248C193.325 95.504 193.325 95.728 193.325 95.92C193.325 96.048 193.325 96.208 193.325 96.4ZM230.204 118.192C228.796 118.128 227.772 118.032 227.132 117.904V119.632C227.196 121.552 227.26 123.12 227.324 124.336C227.452 125.552 227.868 126.736 228.572 127.888C229.34 129.36 230.428 130.448 231.836 131.152C233.244 131.856 234.62 132.08 235.964 131.824C237.308 131.568 238.428 130.8 239.324 129.52C240.284 128.176 240.7 126.192 240.572 123.568C241.212 123.632 242.076 123.664 243.164 123.664C244.252 123.6 245.372 123.536 246.524 123.472C247.74 123.408 248.892 123.408 249.98 123.472C251.068 123.472 251.964 123.568 252.668 123.76C252.54 125.424 252.412 127.056 252.284 128.656C252.156 130.256 251.996 131.76 251.804 133.168C251.612 134.512 251.356 135.696 251.036 136.72C250.78 137.68 250.428 138.352 249.98 138.736C248.892 140.272 247.484 141.36 245.756 142C244.028 142.64 242.14 143.024 240.092 143.152C238.044 143.28 235.932 143.28 233.756 143.152C231.644 143.024 229.692 142.96 227.9 142.96C226.108 142.704 224.444 142.128 222.908 141.232C221.18 140.016 219.74 138.448 218.588 136.528C217.436 134.544 216.508 132.4 215.804 130.096C215.1 127.728 214.62 125.232 214.364 122.608C214.108 119.984 214.044 117.36 214.172 114.736C214.364 112.368 214.556 110.096 214.748 107.92C215.004 105.68 215.516 103.504 216.284 101.392C217.116 99.536 218.396 97.968 220.124 96.688C221.852 95.344 223.804 94.352 225.98 93.712C228.156 93.008 230.46 92.624 232.892 92.56C235.324 92.496 237.692 92.752 239.996 93.328C242.94 93.84 245.308 94.864 247.1 96.4C248.892 97.936 250.236 99.792 251.132 101.968C252.092 104.144 252.668 106.544 252.86 109.168C253.052 111.792 253.052 114.448 252.86 117.136C252.412 117.264 251.548 117.392 250.268 117.52C249.052 117.648 247.58 117.776 245.852 117.904C244.188 118.032 242.396 118.128 240.476 118.192C238.556 118.256 236.7 118.288 234.908 118.288C233.18 118.288 231.612 118.256 230.204 118.192ZM241.436 105.616C240.796 104.464 239.9 103.6 238.748 103.024C238.236 102.704 237.724 102.48 237.212 102.352C236.7 102.16 236.092 102.064 235.388 102.064C233.852 102.064 232.604 102.224 231.644 102.544C230.684 102.864 229.916 103.312 229.34 103.888C228.764 104.464 228.316 105.136 227.996 105.904C227.74 106.672 227.548 107.472 227.42 108.304C227.292 109.008 227.228 109.52 227.228 109.84C227.292 110.096 227.612 110.288 228.188 110.416C228.764 110.48 229.66 110.512 230.876 110.512C232.156 110.448 234.012 110.416 236.444 110.416C238.108 110.416 239.356 110.448 240.188 110.512C241.02 110.576 241.596 110.608 241.916 110.608C242.3 110.544 242.492 110.448 242.492 110.32C242.492 110.128 242.492 109.776 242.492 109.264C242.492 107.984 242.14 106.768 241.436 105.616Z\" fill=\"#38B387\" /> </svg> </div> <p>New Password:</p> <input id=\"pwd\" type=\"password\" placeholder=\"New Password\" /> <p>Confirm Password:</p> <input id=\"re_pwd\" type=\"password\" placeholder=\"Confirm Passowrd\" /> <br /> <button id=\"button\">Confirm</button> </div></body></html>";
                context.Text(html);
            }
        });
    }

    private static boolean checkToken(String uid, String token) {

        // Validate input
        if (uid == null || token == null)
            return false;

        // Access the MongoDB collection
        MongoCollection<Document> collection = Database.getCollection("lingvosphere", "users");

        // Find the user document by uid
        Document userDoc = collection.find(eq("uid", uid)).first();

        if (userDoc == null) {
            // User not found
            return false;
        } else {
            // Check if the token matches
            String storedToken = userDoc.getString("token");
            if (token.equals(storedToken)) {
                // Token is valid
                return true;
            } else {
                // Token is invalid
                return false;
            }
        }
    }
}
